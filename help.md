# 📱 dlna客户端无法搜索到UnPlay解决办法
> 主要3个原因：1. 同一台路由器 2. 手机端: 本地网络权限和VPN干扰 3. tv端youtube干扰
---

## 目录
- [1️⃣ 路由器](#1️⃣-路由器)
- [2️⃣ 手机端设置](#2️⃣-手机端设置)
- [3️⃣ UnPlay TV端问题](#3️⃣-unplaytv端问题)
- [4️⃣ VPN / 网络工具 特殊配置](#4️⃣-vpn--网络工具-特殊配置)
- [5️⃣ 终极重启大法](#5️⃣-终极重启大法)
- [6️⃣ 最后的话](#6️⃣-最后的话)

---

<p align="center">
  <img src="https://github.com/suaptv/UnPlay/blob/main/images/dlnaConnectRead.jpg?raw=true" alt="DLNA连接说明" width="80%">
  <br>
  <em>DLNA连接示意图：手机 ➔ 路由器 ➔ Apple TV</em>
</p>

## 1️⃣ 路由器
- 📶 **手机 和 Apple TV 连接的是同一个路由器，同一个Wi-Fi名字**
- ❌ 如果你家是「Mesh 组网」或「AP + 主路由」且不在同一局域网，**可以把路由器设为 AP 模式**  
  👉 [AP模式科普视频（B站）](https://www.bilibili.com/video/BV1A5411p72H)
- 更多局域网知识可以去B站学习, 开发者能力也有限  

### ⚠️ 特殊问题（Wi-Fi 7 / 插件）
- 部分 **Wi-Fi 7 路由器** → 尝试关闭 Wi-Fi 7 功能
- 如果有 **限速插件 / MWAN3** → 关闭
- 如果以上搞不定 → **重启路由器**（真的有用）

> 💡 实在不想折腾：确保手机和电视**连同一个Wi-Fi名字**，先排除网络问题。

---

## 2️⃣ 手机端设置
### 📲 iOS / Android 权限
- ✅ **App 必须从官方商店下载**（不要用破解、自签名）
- ✅ 打开 **「本地网络」权限**  
  👉 设置 → 找到对应 App → 打开「本地网络」
- ✅ **关闭 VPN**（或配置分流，见第4节）
- 💡 **小技巧：删除App重新从商店下载** - 有时候权限缓存会导致问题，重装可以重置网络权限

### 📱 特定 App 小问题

| App | 现象 | 解决方法 |
|-----|------|----------|
| 咪咕视频 | 第2次投屏搜不到 | 杀掉后台重开 |
| 任意 App | 列表里没看见? | **上下滑动一下列表**（UI排版问题） |
| 部分 App | 点两次才出设备 | App 本身制作问题，多点一次 |

---
## 3️⃣ UnPlay（TV端）问题

### ❌ 异常情况
- 🚫 **不要升级测试版系统**（API功能 不稳定，导致投屏失败）
- 🚫 **关闭 YouTube**（它会占用某些网络端口，干扰投屏发现）

### 📌 受影响 App 列表（如遇投屏失败）

- 小红书（iOS）
- Alook 浏览器（iOS）
- 芒果TV（iOS）
- 腾讯视频（iOS）
- UC 浏览器

> 原因是这些 App **没有完整实现 DLNA 搜索协议**，不是你的问题。

---

## 4️⃣ VPN / 网络工具 特殊配置

如果你必须开 VPN / 代理，请按以下方式配置，否则会拦截投屏广播包。
如你使用VPN没有列出可以自行探索, 开发者能力有限

### 🔧 各工具配置方法

#### ✅ Quantumult X
- 打开「其他设置」→ 开启 **「兼容性增强」**

#### ✅ Surge
- 编辑配置文件，在 `[General]` 下添加：
tun-excluded-routes = 239.255.255.250/32


#### ✅ Stash
- 打开 **「Tunnel 兼容模式」**

#### ✅ Loon
- 在配置文件 `[General]` 添加：
[General]
bypass-tun=239.255.255.250/32


> 如果不配置，投屏广播会被拦截，永远搜不到设备。

---

## 5️⃣ 终极重启大法

如果以上全都试过了，还不行，按顺序：

1. **重启路由器**
2. **重启 Apple TV**（或彻底关闭所有后台）
3. **重启手机**（或彻底关闭所有后台）

> 90% 的疑难杂症，重启能解决。

---

## 6️⃣ 最后的话

如果你试了以上所有方法，还是不行——

- 可能是 **路由器厂商对广播包支持不好**
- 可能是 **某个冷门插件拦截了 UDP 239.255.255.250**
- 可能是 **运营商光猫做了隔离**

> 投屏找不到设备的原因太多太杂，无法一一归纳，建议尝试：
> - 换个路由器试试
> - 换个手机热点试试（电视连热点）

---

📌 **一句话总结：**

> **同一Wi-Fi + 本地网络权限 + 关VPN + 重启** = 99% 解决

如果你解决了问题，欢迎把这篇文章分享给同样被坑的人～
